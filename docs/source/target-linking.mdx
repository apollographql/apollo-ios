---
title: Target linking
---

The Apollo iOS library includes multiple products. Make sure that you link your project targets against the correct products.

## Summary (tl;dr)

- In a monolithic project (one with a single application target):
  - Link your target to the `Apollo` library.
  - Optionally, link `ApolloSQLite` and/or `ApolloWebSocket` to the module that sets up your `ApolloClient` to enable their functionality.

- When including Apollo iOS in a multi-module project:
  - Link `Apollo` to the modules that configure or use the networking and caching APIs.
  - Optionally, link `ApolloSQLite` and/or `ApolloWebSocket` to the module that sets up your `ApolloClient` to enable their functionality.
  - Link `ApolloAPI` to the modules that only include generated models.
  - Optionally, link `ApolloTestSupport` to your unit test target to create mocks of your generated models.

> #### **Important: `ApolloCodegenLib` should not be linked to your application targets.**
> It only supports macOS and should only be linked to by development tools that want to use the Apollo code generation engine.
> For most projects, it is recommended to use the Codegen CLI instead of using `ApolloCodegenLib` directly.

> **Note for Cocoapods users:**
>
> Cocoapods combines subspecs into a single target. This means that:
> - `ApolloAPI` will be merged into the `Apollo` target.
> - If the `ApolloSQLite` and `ApolloWebSocket` subspecs are used, they will also be merged into the `Apollo` target.

## The Libraries

These are the libraries that compose the Apollo iOS package:

### `Apollo`

- **Summary:**
  - The core Apollo client library.
  - Includes the networking and caching APIs, including `ApolloClient` and `ApolloStore`.
- **Usage:**
  - Any targets that need to access these core components directly should be linked against `Apollo`.

### `ApolloAPI`

- **Summary:**
  - Includes the common components that are used by the generated models for your project
- **Usage:**
  - Any targets that include your generated models should be linked to `ApolloAPI`.
  - The `Apollo` library has a dependency on this target, so any target that links to `Apollo` does not need to link to  `ApolloAPI` directly.
  - Because the generated models export the `ApolloAPI` library's interface, targets that consume generated models but do not contain them do not need to link to `ApolloAPI` directly.

### `ApolloSQLite`

- **Summary:**
  - Provides a `NormalizedCache` implementation backed by a `SQLite` database
  - Use this library if you would like to persist cache data across application lifecycles.
    - See the [`SQLiteNormalizedCache` documentation](./caching/cache-setup#sqlitenormalizedcache) for more information on setting up a persistent SQLite cache.
- **Usage:**
  - This library only needs to be linked to your targets that configure the `SQLiteNormalizedCache` and pass it to the `ApolloStore`.

### `ApolloWebSocket`

- **Summary:**
  - Provides a web socket transport implementation used to support `GraphQLSubscription` operations
  - If your project uses GraphQL subscriptions, you must include this library.
    - See the [Enabling GraphQL subscription support documentation](./fetching/subscriptions#enabling-graphql-subscription-support) for more information on setting up a web socket transport.
- **Usage:**
  - This library only needs to be linked to your targets that configure the `WebSocketTransport` and pass it to the `ApolloClient`.

### `ApolloTestSupport`

- **Summary:**
  - Includes the APIs for creating test mocks for your generated models
- **Usage:**
  - Link this library to *unit test targets* that need to create mocks of generated models.

### `ApolloCodegenLib`

- **Summary:**
  - Includes the code generation engine used to generate your GraphQL models
  - Use this library if you want to run the code generation engine from your own Swift executable targets.
    - For most projects, it is recommended to use the Codegen CLI instead of using `ApolloCodegenLib` directly.
- **Usage:**
  - Link this library to development tools that want to use the Apollo code generation engine.
  - Only supports macOS
  - **`ApolloCodegenLib` should not be linked to your application targets.**