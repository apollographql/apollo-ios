import SPMInstallCLI from "../shared/spm-install-cli.mdx"

<ExpansionPanel title="Swift Package Manager">

<ExpansionPanelList>

<ExpansionPanelListItem>

#### Install the Codegen CLI

<SPMInstallCLI />

</ExpansionPanelListItem>

<ExpansionPanelListItem>

#### Initialize the code generation configuration

The Codegen CLI uses a JSON file to configure the code generation engine. Use the Codegen CLI `init` command to create this file with default values. From your project's root directory, run:

```bash
./apollo-ios-cli init --schema-name ${MySchemaName} --module-type swiftPackageManager
```

* `${MySchemaName}` should be the name you want for the namespace of your generated schema files.
* `embeddedInTarget` or `swiftPackageManager` are both suitable module types to use when your dependency manager for Apollo iOS is Swift Package Manager.

This will create an `apollo-codegen-config.json` file with the default values.

</ExpansionPanelListItem>
<ExpansionPanelListItem>

#### Configure code generation options

Open the `apollo-codegen-config.json` file to configure code generation for your project.

The default configuration will:
- Find all GraphQL schema files ending with the file extension `.graphqls` within your project directory.
- Find all GraphQL operation and fragment definition files ending with the file extension `.graphql` within your project directory.
- Generate Swift code for the schema types in a directory with the `schema-name` provided.
- Generate Swift code for the operation and fragment models relative to the `.graphql` files that define them.

</ExpansionPanelListItem>
<ExpansionPanelListItem>

#### Run code generation

From your project's root directory, run:

```bash
./apollo-ios-cli generate
```

Your generated files will be created with the file extension `.graphql.swift`.

</ExpansionPanelListItem>
<ExpansionPanelListItem>

#### Add the generated schema and operation files to your target

By default, a directory containing your generated schema files will be located in a directory with the `schema-name` you provided; your generated operation and fragment files will be in the same location as the `.graphql` files they are defined by.

If your target is created in an Xcode project or workspace, you will need to manually add the generated files to your target.

> **Note:** Because adding generated files to your Xcode targets must be done manually each time you generate new files, we highly recommend defining your project targets with SPM. Alternatively, you can generate your operations into the package that includes your schema files. For more information see the documentation for [Code Generation Configuration](./codegen-configuration).

</ExpansionPanelListItem>
</ExpansionPanelList>
</ExpansionPanel>
